{
  "$id": "config.schema.json",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "description": "DataUnion configuration format",
  "type": "object",
  "additionalProperties": false,
  "properties": {
    "dataUnion": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "minimumWithdrawTokenWei": {
          "anyOf": [
            {
              "type": "number"
            },
            {
              "type": "string"
            },
            {
              "type": "object"
            }
          ]
        },
        "payForTransport": {
          "type": "boolean"
        },
        "factoryMainnetAddress": {
          "type": "string",
          "format": "ethereum-address"
        },
        "factorySidechainAddress": {
          "type": "string",
          "format": "ethereum-address"
        },
        "templateMainnetAddress": {
          "type": "string",
          "format": "ethereum-address"
        },
        "templateSidechainAddress": {
          "type": "string",
          "format": "ethereum-address"
        }
      }
    },
    "auth": {
        "type": "object",
        "additionalProperties": false,
        "properties": {
            "privateKey": {
                "type": "string",
                "format": "ethereum-private-key"
            },
            "address": {
                "type": "string",
                "format": "ethereum-address"
            },
            "ethereum": {
                "type": "object"
            },
            "sessionToken": {
                "type": "string"
            },
            "unauthenticated": {
                "type": "boolean"
            }
        }
    },
    "binanceAdapterAddress": {
        "type": "string",
        "format": "ethereum-address"
    },
    "binanceSmartChainAMBAddress": {
        "type": "string",
        "format": "ethereum-address"
    },
    "withdrawServerUrl": {
        "type": "string",
        "format": "uri"
    },
    "dataUnionBinanceWithdrawalChainRPCs": {
      "$ref": "#/definitions/chainConnectionInfoList"
    },
    "dataUnionChainRPCs": {
      "$ref": "#/definitions/chainConnectionInfoList"
    },
    "tokenAddress": {
      "type": "string",
      "format": "ethereum-address"
    },
    "tokenSidechainAddress": {
      "type": "string",
      "format": "ethereum-address"
    },
    "mainChainRPCs": {
        "anyOf": [{
            "$ref": "#/definitions/chainConnectionInfoList"
        }, {
        "type": "string",
        "format": "uri"
        }]
    },
    "debug": {
        "type": "object",
        "additionalProperties": false,
        "properties": {
            "inspectOpts": {
                "type": "object"
            }
        }
    },
    "theGraphUrl" : {
        "type" : "string",
        "format": "uri"
    },
    "restUrl": {
        "type": "string",
        "format": "uri"
    }
  },
  "definitions": {
    "rpcProviderConfig": {
      "type": "object",
      "required": [
        "url"
      ],
      "properties": {
        "url": {
          "type": "string",
          "format": "uri"
        },
        "user": {
          "type": "string"
        },
        "password": {
          "type": "string"
        },
        "allowInsecureAuthentication": {
          "type": "boolean"
        },
        "timeout": {
          "type": "number",
          "default": 120000
        },
        "headers": {
          "type": "object"
        }
      }
    },
    "chainConnectionInfoList": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "rpcs",
        "chainId"
      ],
      "properties": {
        "chainId": {
          "type": "number"
        },
        "name": {
          "type": "string"
        },
        "rpcs": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/rpcProviderConfig"
          }
        }
      }
    }
  }
}
